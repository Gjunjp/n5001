<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥èªèª²ç¨‹ï¼šå¾å¶åƒæ´»å‹•åˆ°è·å ´æ‡‰ç”¨ (Final Print Ver.)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Zen Maru Gothic -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700;900&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* è‡ªå®šç¾©æ¨£å¼ */
        body {
            font-family: 'Zen Maru Gothic', "Microsoft JhengHei", sans-serif;
            background-color: #E0F2F7;
            background-image: radial-gradient(#B3E5FC 2px, transparent 2px);
            background-size: 20px 20px;
            color: #5D4037;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
        ruby {
            ruby-align: center;
        }
        rt {
            user-select: none;
            font-size: 0.6em;
            color: #8D6E63;
            font-weight: 400;
            margin-bottom: -0.2em;
        }
        
        /* A4 å®¹å™¨ (å–®é æ¨¡å¼) */
        .a4-paper {
            width: 100%;
            max-width: 210mm;
            height: 100%;
            aspect-ratio: 210 / 297;
            max-height: 95vh;
            margin: 0 auto;
            background: #FAFDFF;
            position: relative;
            box-shadow: 0 10px 30px rgba(135, 206, 235, 0.4);
            display: flex;
            flex-direction: column;
            overflow: hidden; 
            border-radius: 16px;
            border: 8px solid #E1F5FE;
            transition: all 0.3s ease;
        }

        /* åˆ—è¡¨/åˆ—å°æ¨¡å¼ */
        .a4-paper.list-mode {
            aspect-ratio: auto;
            height: auto;
            max-height: none;
            overflow: visible;
            border: none;
            box-shadow: none;
            background: transparent;
            display: block;
        }

        .list-mode-slide {
            width: 100%;
            max-width: 210mm;
            aspect-ratio: 210 / 297;
            background: #FAFDFF;
            margin: 0 auto 40px auto;
            border: 8px solid #E1F5FE;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            page-break-inside: avoid;
            page-break-after: always;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* è£é£¾ Emoji */
        .deco-emoji {
            position: absolute;
            opacity: 0.4;
            pointer-events: none;
            font-size: 3rem;
            z-index: 0;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }

        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #81D4FA; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #4FC3F7; }

        @media print {
            body { background: white; margin: 0; padding: 0; display: block; }
            .a4-paper, .a4-paper.list-mode { width: 100%; max-width: none; margin: 0; border: none; box-shadow: none; background: white; }
            .list-mode-slide { margin: 0; border: none; border-radius: 0; box-shadow: none; page-break-after: always; height: 100vh; }
            #header-controls, #nav-bar, .deco-emoji, .no-print { display: none !important; }
            #header { display: none !important; }
            #content { overflow: visible !important; }
            @page { size: A4 portrait; margin: 0; }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen py-4">

    <div id="app" class="a4-paper">
        <div id="decorations">
            <div class="deco-emoji" style="top: 2%; left: 2%;">â„ï¸</div>
            <div class="deco-emoji" style="top: 5%; right: 5%;">âœ¨</div>
            <div class="deco-emoji" style="bottom: 15%; left: 5%;">ğŸ°</div>
            <div class="deco-emoji" style="bottom: 10%; right: 3%;">â˜•</div>
        </div>

        <div id="header" class="h-16 bg-sky-200 flex items-center justify-between px-6 text-sky-900 shrink-0 border-b-4 border-sky-100 z-10 relative">
            <div id="header-title" class="font-bold text-2xl tracking-wider flex items-center gap-3 drop-shadow-sm"></div>
            <div id="header-controls" class="flex items-center gap-3">
                <button onclick="toggleViewMode()" class="bg-white hover:bg-sky-50 text-sky-600 px-4 py-2 rounded-full font-bold text-sm flex items-center gap-2 border-2 border-sky-100 shadow-sm transition-all hover:scale-105 active:scale-95">
                    <i data-lucide="align-justify" class="w-4 h-4"></i>
                    <span id="view-mode-text">å…¨éƒ¨é¡¯ç¤º (åˆ—è¡¨/åˆ—å°ç”¨)</span>
                </button>
            </div>
        </div>

        <div id="content" class="flex-1 p-6 md:p-10 relative flex flex-col z-10 overflow-y-auto custom-scrollbar"></div>

        <div id="nav-bar" class="h-18 bg-white/90 backdrop-blur-sm border-t border-sky-100 flex items-center justify-between px-6 py-3 shrink-0 select-none z-20 transition-all">
            <button id="btn-prev" onclick="prevSlide()" class="flex items-center gap-2 px-5 py-2 rounded-full font-bold transition-all text-sky-600 bg-sky-50 hover:bg-sky-100 border border-sky-200 text-lg shadow-sm">
                <i data-lucide="chevron-left" class="w-6 h-6"></i> <span class="hidden md:inline">å‰ã¸</span>
            </button>
            <div id="page-indicator" class="text-sky-500 font-bold text-xl bg-white px-4 py-1 rounded-full border border-sky-100 shadow-sm"></div>
            <button id="btn-next" onclick="nextSlide()" class="flex items-center gap-2 px-5 py-2 rounded-full font-bold transition-all bg-sky-400 text-white hover:bg-sky-500 shadow-md border-b-4 border-sky-500 hover:border-sky-600 active:border-b-0 active:translate-y-1 text-lg">
                <span class="hidden md:inline">æ¬¡ã¸</span> <i data-lucide="chevron-right" class="w-6 h-6"></i>
            </button>
        </div>
    </div>

    <script>
        // --- èª²ç¨‹è³‡æ–™ ---
        const slides = [
            // --- èª²ç¨‹å°å…¥ ---
            {
                id: 'intro-01',
                theme: 'ãƒ—ãƒ­ãƒ­ãƒ¼ã‚° (åºç« )',
                type: 'intro',
                title: 'ä¸»äººå…¬ï¼ˆã—ã‚…ã˜ã‚“ã“ã†ï¼‰ç´¹ä»‹ï¼ˆã—ã‚‡ã†ã‹ã„ï¼‰',
                subtitle: 'å¼µï¼ˆãƒãƒ§ã‚¦ï¼‰ã•ã‚“ã®ç‰©èªï¼ˆã‚‚ã®ãŒãŸã‚Šï¼‰',
                content: {
                    name: 'å¼µï¼ˆãƒãƒ§ã‚¦ï¼‰ã•ã‚“',
                    role: 'ç”·ï¼ˆãŠã¨ã“ï¼‰',
                    job: 'ã‚¹ãƒˆãƒ¬ãƒƒãƒãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼ / ã‚¹ãƒˆãƒ¬ãƒƒãƒã®å…ˆç”Ÿï¼ˆã›ã‚“ã›ã„ï¼‰',
                    likes: ['yosugala', 'ãƒã‚±ãƒ¢ãƒ³ (æ°´è‰²ç³»)', 'Akiã¡ã‚ƒã‚“ (ãƒ¡ã‚¤ãƒ‰)'],
                    goal: 'æ—¥æœ¬èªï¼ˆã«ã»ã‚“ã”ï¼‰ã§ã€€è©±ï¼ˆã¯ãªï¼‰ã—ãŸã„ï¼'
                }
            },
            
            // ==========================================
            // ä¸»é¡Œ 1: æ—¥æœ¬å¶åƒäº¤æµ
            // ==========================================
            {
                id: 't1-01',
                theme: 'ä¸»é¡Œ 1: æ—¥æœ¬å¶åƒäº¤æµ',
                type: 'title',
                title: 'ã‚¢ã‚¤ãƒ‰ãƒ«ã®ç‰¹å…¸ä¼šï¼ˆã¨ãã¦ã‚“ã‹ã„ï¼‰',
                subtitle: '1åˆ†é–“ï¼ˆã„ã£ã·ã‚“ã‹ã‚“ï¼‰ã®å¹¸ï¼ˆã—ã‚ã‚ï¼‰ã›',
                note: 'æ¯æ¬¡æ’éšŠ 30-50 åˆ†é˜ï¼Œåªç‚ºäº†é‚£çè²´çš„ä¸€åˆ†é˜ã€‚è®“æˆ‘å€‘ç·´ç¿’é€™æ®µæ™‚é–“è¦èªªä»€éº¼ï¼'
            },
            // å–®å­— (æ”¹ç‚ºé›™æ¬„é¡¯ç¤º)
            {
                id: 't1-vocab-1',
                theme: 'ä¸»é¡Œ 1: æ—¥æœ¬å¶åƒäº¤æµ',
                type: 'vocab',
                title: 'å˜èªï¼ˆãŸã‚“ã”ï¼‰ (ç‰¹å…¸ä¼šãƒ»ãƒ©ã‚¤ãƒ–)',
                content: [
                { jp: 'ç‰¹å…¸ä¼šï¼ˆã¨ãã¦ã‚“ã‹ã„ï¼‰', type: 'åè©', zh: 'ç²‰çµ²ç¦åˆ©æœƒ/è¦‹é¢æœƒ' },
                { jp: 'ãƒã‚§ã‚­', type: 'åè©', zh: 'æ‹ç«‹å¾—' },
                { jp: 'ãƒ©ã‚¤ãƒ–', type: 'åè©', zh: 'Live æ¼”å”±æœƒ' },
                { jp: 'ä¸¦ï¼ˆãªã‚‰ï¼‰ã³ã¾ã™', type: 'å‹•è©', zh: 'æ’éšŠ' },
                { jp: 'å¾…ï¼ˆã¾ï¼‰ã¡ã¾ã™', type: 'å‹•è©', zh: 'ç­‰å¾…' },
                { jp: '1åˆ†ï¼ˆã„ã£ã·ã‚“ï¼‰', type: 'æ™‚é–“', zh: '1åˆ†é˜' },
                { jp: '1æšï¼ˆã„ã¡ã¾ã„ï¼‰', type: 'é‡è©', zh: 'ä¸€å¼µ' },
                { jp: 'å¬‰ï¼ˆã†ã‚Œï¼‰ã—ã„', type: 'å½¢å®¹è©', zh: 'é–‹å¿ƒçš„' },
                { jp: 'å¤§å¥½ï¼ˆã ã„ã™ï¼‰ã', type: 'å½¢å®¹å‹•è©', zh: 'æœ€å–œæ­¡' },
                { jp: 'å¼µï¼ˆãƒãƒ§ã‚¦ï¼‰', type: 'åè©', zh: 'å¼µ (å§“æ°)' }
                ]
            },
            {
                id: 't1-vocab-2',
                theme: 'ä¸»é¡Œ 1: æ—¥æœ¬å¶åƒäº¤æµ',
                type: 'vocab',
                title: 'å˜èªï¼ˆãŸã‚“ã”ï¼‰ (æ„Ÿæƒ…ãƒ»ãã®ä»–)',
                content: [
                { jp: 'åˆæ‹ï¼ˆã¯ã¤ã“ã„ï¼‰', type: 'åè©', zh: 'åˆæˆ€' },
                { jp: 'åœ°ä¸‹ï¼ˆã¡ã‹ï¼‰ã‚¢ã‚¤ãƒ‰ãƒ«', type: 'åè©', zh: 'åœ°ä¸‹å¶åƒ' },
                { jp: 'å¿œæ´ï¼ˆãŠã†ãˆã‚“ï¼‰ã—ã¾ã™', type: 'å‹•è©', zh: 'åŠ æ²¹/æ‡‰æ´' },
                { jp: 'ç·Šå¼µï¼ˆãã‚“ã¡ã‚‡ã†ï¼‰ã—ã¾ã™', type: 'å‹•è©', zh: 'ç·Šå¼µ' },
                { jp: 'å¹¸ï¼ˆã—ã‚ã‚ï¼‰ã›', type: 'å/å½¢å‹•', zh: 'å¹¸ç¦' },
                { jp: 'é•·ï¼ˆãªãŒï¼‰ã„', type: 'å½¢å®¹è©', zh: 'é•·çš„' },
                { jp: 'çŸ­ï¼ˆã¿ã˜ã‹ï¼‰ã„', type: 'å½¢å®¹è©', zh: 'çŸ­çš„' },
                { jp: 'ä»Šæ—¥ï¼ˆãã‚‡ã†ï¼‰', type: 'åè©', zh: 'ä»Šå¤©' },
                { jp: 'ã„ã¤ã‚‚', type: 'å‰¯è©', zh: 'ç¸½æ˜¯/ä¸€ç›´' },
                { jp: 'è²·ï¼ˆã‹ï¼‰ã„ã¾ã™', type: 'å‹•è©', zh: 'è²·' }
                ]
            },
            // èª²æ–‡
            {
                id: 't1-02',
                theme: 'ä¸»é¡Œ 1: æ—¥æœ¬å¶åƒäº¤æµ',
                type: 'story',
                title: 'æœ¬æ–‡ï¼ˆã»ã‚“ã¶ã‚“ï¼‰ 1ï¼šé•·ï¼ˆãªãŒï¼‰ã„åˆ—ï¼ˆã‚Œã¤ï¼‰',
                content: [
                { jp: 'ä»Šæ—¥ï¼ˆãã‚‡ã†ï¼‰ã¯ã€€ãƒ©ã‚¤ãƒ–ã§ã™ã€‚', zh: 'ä»Šå¤©æ˜¯ Liveã€‚' },
                { jp: 'ç‰¹å…¸ä¼šï¼ˆã¨ãã¦ã‚“ã‹ã„ï¼‰ã«ã€€ä¸¦ï¼ˆãªã‚‰ï¼‰ã³ã¾ã™ã€‚', zh: 'æ’éšŠåƒåŠ ç‰¹å…¸æœƒã€‚' },
                { jp: 'å¾…ï¼ˆã¾ï¼‰ã¡æ™‚é–“ï¼ˆã˜ã‹ã‚“ï¼‰ã¯ã€€50åˆ†ï¼ˆã”ã˜ã‚…ã£ã·ã‚“ï¼‰ã§ã™ã€‚', zh: 'ç­‰å¾…æ™‚é–“æ˜¯ 50 åˆ†é˜ã€‚' },
                { jp: 'ã§ã‚‚ã€ä¼šï¼ˆã‚ï¼‰ã„ãŸã„ã§ã™ã€‚', zh: 'ä½†æ˜¯ï¼Œæƒ³è¦‹å¦³ã€‚' }
                ]
            },
            {
                id: 't1-03',
                theme: 'ä¸»é¡Œ 1: æ—¥æœ¬å¶åƒäº¤æµ',
                type: 'story',
                title: 'æœ¬æ–‡ï¼ˆã»ã‚“ã¶ã‚“ï¼‰ 2ï¼šãƒã‚§ã‚­åˆ¸ï¼ˆã‘ã‚“ï¼‰',
                content: [
                { jp: 'ãƒã‚§ã‚­åˆ¸ï¼ˆã‘ã‚“ï¼‰ã‚’ã€€è²·ï¼ˆã‹ï¼‰ã„ã¾ã™ã€‚', zh: 'è²·æ‹ç«‹å¾—åˆ¸ã€‚' },
                { jp: '1æšï¼ˆã„ã¡ã¾ã„ï¼‰ã€€250å…ƒï¼ˆã’ã‚“ï¼‰ã§ã™ã€‚', zh: 'ä¸€å¼µ 250 å…ƒã€‚' },
                { jp: 'æ™‚é–“ï¼ˆã˜ã‹ã‚“ï¼‰ã¯ã€€1åˆ†ï¼ˆã„ã£ã·ã‚“ï¼‰ã§ã™ã€‚', zh: 'æ™‚é–“æ˜¯ä¸€åˆ†é˜ã€‚' },
                { jp: 'ãƒ‰ã‚­ãƒ‰ã‚­ã—ã¾ã™ã€‚', zh: 'å¿ƒè·³å¾ˆå¿«/å¾ˆç·Šå¼µã€‚' }
                ]
            },
            // æ–‡æ³•
            {
                id: 't1-07',
                theme: 'ä¸»é¡Œ 1: æ—¥æœ¬å¶åƒäº¤æµ',
                type: 'grammar',
                title: 'æ–‡æ³•ï¼ˆã¶ã‚“ã½ã†ï¼‰ 1',
                subtitle: 'A ã¯ B ã§ã™ã€‚',
                content: {
                explanation: 'é€™æ˜¯æœ€åŸºç¤çš„å¥å‹ï¼Œç”¨ä¾†å‘Šè¨´å¶åƒä½ æ˜¯èª°ã€‚',
                examples: [
                    { jp: 'ç§ï¼ˆã‚ãŸã—ï¼‰ã¯ã€€å¼µï¼ˆãƒãƒ§ã‚¦ï¼‰ã§ã™ã€‚', zh: 'æˆ‘æ˜¯å¼µã€‚' },
                    { jp: 'ã“ã‚Œ ã¯ã€€ãƒã‚§ã‚­åˆ¸ï¼ˆã‘ã‚“ï¼‰ã§ã™ã€‚', zh: 'é€™æ˜¯æ‹ç«‹å¾—åˆ¸ã€‚' },
                    { jp: 'å¾…ï¼ˆã¾ï¼‰ã¡æ™‚é–“ï¼ˆã˜ã‹ã‚“ï¼‰ã¯ã€€50åˆ†ï¼ˆã”ã˜ã‚…ã£ã·ã‚“ï¼‰ã§ã™ã€‚', zh: 'ç­‰å¾…æ™‚é–“æ˜¯50åˆ†é˜ã€‚' }
                ]
                }
            },
            {
                id: 't1-08',
                theme: 'ä¸»é¡Œ 1: æ—¥æœ¬å¶åƒäº¤æµ',
                type: 'grammar',
                title: 'æ–‡æ³•ï¼ˆã¶ã‚“ã½ã†ï¼‰ 2',
                subtitle: 'A ãŒ å¥½ï¼ˆã™ï¼‰ãã§ã™ / å¤§å¥½ï¼ˆã ã„ã™ï¼‰ãã§ã™ã€‚',
                content: {
                explanation: 'ã€Œå¤§å¥½ãã€æ¯”ã€Œå¥½ãã€ç¨‹åº¦æ›´å¼·çƒˆï¼Œå¶åƒè½äº†æœƒæ›´é–‹å¿ƒã€‚',
                examples: [
                    { jp: 'yosugala ãŒã€€å¤§å¥½ï¼ˆã ã„ã™ï¼‰ãã§ã™ã€‚', zh: 'æˆ‘æœ€å–œæ­¡ yosugalaã€‚' },
                    { jp: 'ã‚ãªãŸ ãŒã€€å¥½ï¼ˆã™ï¼‰ãã§ã™ã€‚', zh: 'æˆ‘å–œæ­¡å¦³ã€‚' },
                    { jp: 'ãƒ©ã‚¤ãƒ– ãŒã€€å¤§å¥½ï¼ˆã ã„ã™ï¼‰ãã§ã™ã€‚', zh: 'æˆ‘æœ€å–œæ­¡ Liveã€‚' }
                ]
                }
            },
            // æ–‡æ³•ç·´ç¿’
            {
                id: 't1-09',
                theme: 'ä¸»é¡Œ 1: æ—¥æœ¬å¶åƒäº¤æµ',
                type: 'game',
                title: 'æ–‡æ³•ç·´ç¿’ï¼ˆã¶ã‚“ã½ã†ã‚Œã‚“ã—ã‚…ã†ï¼‰',
                subtitle: 'è«‹å°‡æ–‡å­—é‡çµ„æˆæ­£ç¢ºçš„å¥å­',
                content: [
                { q: '[ã§ã™] [ç§] [ã¯] [å¼µ]', a: '_________________________________' },
                { q: '[ãƒã‚§ã‚­] [å¥½ã] [ãŒ] [ã§ã™] [å¤§å¥½ã]', a: '_________________________________' },
                { q: '[æ™‚é–“] [1åˆ†] [ã§ã™] [ã¯]', a: '_________________________________' }
                ]
            },
            // æœƒè©±ç·´ç¿’
            {
                id: 't1-10',
                theme: 'ä¸»é¡Œ 1: æ—¥æœ¬å¶åƒäº¤æµ',
                type: 'game',
                title: 'ä¼šè©±ç·´ç¿’ï¼ˆã‹ã„ã‚ã‚Œã‚“ã—ã‚…ã†ï¼‰ï¼šåº—å“¡ï¼ˆã¦ã‚“ã„ã‚“ï¼‰ä½“é¨“ï¼ˆãŸã„ã‘ã‚“ï¼‰',
                subtitle: 'ã‚ãªãŸã¯ç‰©è²©ï¼ˆã¶ã£ã±ã‚“ï¼‰ã‚¹ã‚¿ãƒƒãƒ•ã§ã™ã€‚é‡‘é¡ï¼ˆãã‚“ãŒãï¼‰ã‚’ç­”ï¼ˆã“ãŸï¼‰ãˆã¦ãã ã•ã„ã€‚(1æš 250å…ƒ)',
                content: [
                { q: 'å®¢ï¼ˆãã‚ƒãï¼‰: ãƒã‚§ã‚­åˆ¸ï¼ˆã‘ã‚“ï¼‰ã€1æšï¼ˆã„ã¡ã¾ã„ï¼‰ã€€ãã ã•ã„ã€‚', a: 'åº—å“¡ï¼ˆã¦ã‚“ã„ã‚“ï¼‰: ã¯ã„ã€__________________ å…ƒï¼ˆã’ã‚“ï¼‰ã§ã™ã€‚' },
                { q: 'å®¢ï¼ˆãã‚ƒãï¼‰: 2æšï¼ˆã«ã¾ã„ï¼‰ã€€ãŠé¡˜ï¼ˆã­ãŒï¼‰ã„ã—ã¾ã™ã€‚', a: 'åº—å“¡ï¼ˆã¦ã‚“ã„ã‚“ï¼‰: ã¯ã„ã€__________________ å…ƒï¼ˆã’ã‚“ï¼‰ã§ã™ã€‚' },
                { q: 'å®¢ï¼ˆãã‚ƒãï¼‰: 3æšï¼ˆã•ã‚“ã¾ã„ï¼‰ã€€ãã ã•ã„ã€‚', a: 'åº—å“¡ï¼ˆã¦ã‚“ã„ã‚“ï¼‰: ã¯ã„ã€__________________ å…ƒï¼ˆã’ã‚“ï¼‰ã§ã™ã€‚' }
                ]
            },
            // å°è©±å¯¦æˆ°
            {
                id: 't1-04',
                theme: 'ä¸»é¡Œ 1: æ—¥æœ¬å¶åƒäº¤æµ',
                type: 'dialogue',
                title: 'å¯¾è©±ï¼ˆãŸã„ã‚ï¼‰ï¼šæ¨ï¼ˆãŠï¼‰ã—ã¨è©±ï¼ˆã¯ãªï¼‰ã™',
                content: [
                { role: 'me', name: 'å¼µå…ˆç”Ÿ', text: 'åˆï¼ˆã¯ã˜ï¼‰ã‚ã¾ã—ã¦ã€‚å¼µï¼ˆãƒãƒ§ã‚¦ï¼‰ã§ã™ã€‚', trans: 'åˆæ¬¡è¦‹é¢ã€‚æˆ‘æ˜¯å¼µã€‚' },
                { role: 'idol', name: 'å¶åƒ', text: 'å¼µï¼ˆãƒãƒ§ã‚¦ï¼‰ã•ã‚“ï¼æ¥ï¼ˆãï¼‰ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ï¼', trans: 'å¼µå…ˆç”Ÿï¼è¬è¬ä½ ä¾†ï¼' },
                { role: 'me', name: 'å¼µå…ˆç”Ÿ', text: '______ã•ã‚“ã®ã€€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€€æœ€é«˜ï¼ˆã•ã„ã“ã†ï¼‰ã§ã™ã€‚', trans: '______çš„è¡¨æ¼”æœ€æ£’äº†ã€‚' },
                { role: 'idol', name: 'å¶åƒ', text: 'ã‚ã‚ŠãŒã¨ã†ï¼å…ƒæ°—ï¼ˆã’ã‚“ãï¼‰ãŒå‡ºï¼ˆã§ï¼‰ã‚‹ã‚ˆï¼', trans: 'è¬è¬ï¼è®“æˆ‘å……æ»¿å…ƒæ°£å–”ï¼' },
                { role: 'me', name: 'å¼µå…ˆç”Ÿ', text: 'ä¼šï¼ˆã‚ï¼‰ãˆã¦ã€€å¬‰ï¼ˆã†ã‚Œï¼‰ã—ã„ã§ã™ã€‚', trans: 'èƒ½è¦‹åˆ°å¦³å¾ˆé–‹å¿ƒã€‚' }
                ]
            },
            {
                id: 't1-12',
                theme: 'ä¸»é¡Œ 1: æ—¥æœ¬å¶åƒäº¤æµ',
                type: 'writing',
                title: 'æ–‡ç« ç·´ç¿’ï¼ˆã¶ã‚“ã—ã‚‡ã†ã‚Œã‚“ã—ã‚…ã†ï¼‰',
                content: {
                original: [
                    'ç§ï¼ˆã‚ãŸã—ï¼‰ã¯ã€€å¼µï¼ˆãƒãƒ§ã‚¦ï¼‰ã§ã™ã€‚',
                    'å°æ¹¾äººï¼ˆã‚¿ã‚¤ãƒ¯ãƒ³ã˜ã‚“ï¼‰ã§ã™ã€‚',
                    'yosugala ãŒã€€å¤§å¥½ï¼ˆã ã„ã™ï¼‰ãã§ã™ã€‚',
                    'ä»Šæ—¥ï¼ˆãã‚‡ã†ï¼‰ã¯ã€€æ¥½ï¼ˆãŸã®ï¼‰ã—ã‹ã£ãŸã§ã™ã€‚'
                ],
                practice: [
                    'ç§ï¼ˆã‚ãŸã—ï¼‰ã¯ã€€_______ ã§ã™ã€‚',
                    '_______ ã§ã™ã€‚(è·æ¥­)',
                    '_______ ãŒã€€å¤§å¥½ï¼ˆã ã„ã™ï¼‰ãã§ã™ã€‚(èˆˆè¶£)',
                    'ã¾ãŸã€€æ¥ï¼ˆãï¼‰ã¾ã™ã€‚(æˆ‘æœƒå†ä¾†)'
                ]
                }
            },
            {
                id: 't1-13',
                theme: 'ä¸»é¡Œ 1: æ—¥æœ¬å¶åƒäº¤æµ',
                type: 'summary',
                title: 'ã¾ã¨ã‚',
                content: [
                'A ã¯ B ã§ã™ã€‚(Aæ˜¯B)',
                'A ãŒ å¤§å¥½ï¼ˆã ã„ã™ï¼‰ãã§ã™ã€‚(æœ€å–œæ­¡ A)',
                'æ•¸é‡è©ï¼š1æšï¼ˆã„ã¡ã¾ã„ï¼‰ã€1åˆ†ï¼ˆã„ã£ã·ã‚“ï¼‰ã€50åˆ†ï¼ˆã”ã˜ã‚…ã£ã·ã‚“ï¼‰'
                ]
            },

            // ==========================================
            // ä¸»é¡Œ 2: æ—¥å¸¸å°è©± (å¥³åƒ•å’–å•¡ & å·¥ä½œ)
            // ==========================================
            {
                id: 't2-vocab-1',
                theme: 'ä¸»é¡Œ 2: æ—¥å¸¸å°è©±',
                type: 'vocab',
                title: 'å˜èªï¼ˆãŸã‚“ã”ï¼‰ (ãƒ¡ã‚¤ãƒ‰ã‚«ãƒ•ã‚§)',
                content: [
                { jp: 'ãƒ¡ã‚¤ãƒ‰', type: 'åè©', zh: 'å¥³åƒ•' },
                { jp: 'æœ€ä½æ¶ˆè²»ï¼ˆã•ã„ã¦ã„ã—ã‚‡ã†ã²ï¼‰', type: 'åè©', zh: 'æœ€ä½æ¶ˆè²»' },
                { jp: 'ã‚·ãƒã‚¨ãƒŠã‚¬', type: 'åè©', zh: 'éŠ€å–‰é•·å°¾å±±é›€' },
                { jp: 'ã‚¢ãƒ­ãƒ¼ãƒ©ãƒ­ã‚³ãƒ³', type: 'åè©', zh: 'å†°å…­å°¾' },
                { jp: 'ç´ æ•µï¼ˆã™ã¦ãï¼‰', type: 'å½¢å®¹è©', zh: 'å¾ˆæ£’/æ¼‚äº®' },
                { jp: 'ä»•äº‹ï¼ˆã—ã”ã¨ï¼‰', type: 'åè©', zh: 'å·¥ä½œ' },
                { jp: 'çµ‚ï¼ˆãŠï¼‰ã‚ã‚Šã¾ã™', type: 'å‹•è©', zh: 'çµæŸ' },
                { jp: 'ç§ï¼ˆã‚ãŸã—ï¼‰ã‚‚', type: 'ç‰‡èª', zh: 'æˆ‘ä¹Ÿæ˜¯' },
                { jp: 'åŒï¼ˆãŠãªï¼‰ã˜', type: 'å/å½¢å‹•', zh: 'ä¸€æ¨£' },
                { jp: 'å†™çœŸï¼ˆã—ã‚ƒã—ã‚“ï¼‰', type: 'åè©', zh: 'ç…§ç‰‡' }
                ]
            },
            {
                id: 't2-vocab-2',
                theme: 'ä¸»é¡Œ 2: æ—¥å¸¸å°è©±',
                type: 'vocab',
                title: 'å˜èªï¼ˆãŸã‚“ã”ï¼‰ (ä»•äº‹)',
                content: [
                { jp: 'ã‚¹ãƒˆãƒ¬ãƒƒãƒ', type: 'åè©', zh: 'ä¼¸å±•' },
                { jp: 'ç—›ï¼ˆã„ãŸï¼‰ã„', type: 'å½¢å®¹è©', zh: 'ç—›' },
                { jp: 'ç¡¬ï¼ˆã‹ãŸï¼‰ã„', type: 'å½¢å®¹è©', zh: 'ç¡¬' },
                { jp: 'æŸ”ï¼ˆã‚„ã‚ï¼‰ã‚‰ã‹ã„', type: 'å½¢å®¹è©', zh: 'è»Ÿ' },
                { jp: 'ã“ã“ / ãã“', type: 'ä»£åè©', zh: 'é€™è£¡ / é‚£è£¡' },
                { jp: 'æ¯ï¼ˆã„ãï¼‰', type: 'åè©', zh: 'å‘¼å¸' },
                { jp: 'å¸ï¼ˆã™ï¼‰ã£ã¦', type: 'å‹•è©', zh: 'å¸æ°£' },
                { jp: 'åï¼ˆã¯ï¼‰ã„ã¦', type: 'å‹•è©', zh: 'åæ°£' },
                { jp: 'ãƒªãƒ©ãƒƒã‚¯ã‚¹', type: 'å‹•è©', zh: 'æ”¾é¬†' },
                { jp: 'ãŠç–²ï¼ˆã¤ã‹ï¼‰ã‚Œæ§˜ï¼ˆã•ã¾ï¼‰', type: 'æŒ¨æ‹¶', zh: 'è¾›è‹¦äº†' }
                ]
            },
            {
                id: 't2-01',
                theme: 'ä¸»é¡Œ 2: æ—¥å¸¸å°è©±',
                type: 'dialogue',
                title: 'æœ¬æ–‡ï¼ˆã»ã‚“ã¶ã‚“ï¼‰ 1ï¼šã€Œå¿ƒç‰©èªã€ã¸',
                content: [
                { role: 'me', name: 'å¼µå…ˆç”Ÿ', text: 'ä»•äº‹ï¼ˆã—ã”ã¨ï¼‰ã€çµ‚ï¼ˆãŠï¼‰ã‚ã‚Šã¾ã—ãŸï¼', trans: 'å·¥ä½œçµæŸäº†ï¼' },
                { role: 'maid', name: 'Aki', text: 'ãŠå¸°ï¼ˆã‹ãˆï¼‰ã‚Šãªã•ã„ã¾ã›ã€ã”ä¸»äººæ§˜ï¼ˆã—ã‚…ã˜ã‚“ã•ã¾ï¼‰ã€‚', trans: 'æ­¡è¿å›å®¶ï¼Œä¸»äººã€‚' },
                { role: 'me', name: 'å¼µå…ˆç”Ÿ', text: 'Akiã•ã‚“ã€ä¼šï¼ˆã‚ï¼‰ã„ã«ã€€æ¥ï¼ˆãï¼‰ã¾ã—ãŸã€‚', trans: 'Akiå°å§ï¼Œæˆ‘ä¾†çœ‹å¦³äº†ã€‚' },
                { role: 'maid', name: 'Aki', text: 'ã‚ã‚‰ã€ã¾ãŸæ¥ï¼ˆãï¼‰ãŸã®ï¼Ÿ ...ã¾ã‚ã€ã‚†ã£ãã‚Šã—ã¦ã„ã£ã¦ã€‚', trans: 'å“å‘€ï¼Œåˆä¾†äº†ï¼Ÿ...ç®—äº†ï¼Œä½ å°±å¥½å¥½æ”¾é¬†å§ã€‚(å‚²å¬Œ)' }
                ]
            },
            {
                id: 't2-02',
                theme: 'ä¸»é¡Œ 2: æ—¥å¸¸å°è©±',
                type: 'dialogue',
                title: 'æœ¬æ–‡ï¼ˆã»ã‚“ã¶ã‚“ï¼‰ 2ï¼šå…±é€šç‚¹ï¼ˆãã‚‡ã†ã¤ã†ã¦ã‚“ï¼‰',
                content: [
                { role: 'me', name: 'å¼µå…ˆç”Ÿ', text: 'Akiã¡ã‚ƒã‚“ã¯ã€€ä½•ï¼ˆãªã«ï¼‰ãŒã€€å¥½ï¼ˆã™ï¼‰ãã§ã™ã‹ï¼Ÿ', trans: 'Aki é†¬å–œæ­¡ä»€éº¼ï¼Ÿ' },
                { role: 'maid', name: 'Aki', text: 'ã‚·ãƒã‚¨ãƒŠã‚¬ã¨ã€€ã‚¢ãƒ­ãƒ¼ãƒ©ãƒ­ã‚³ãƒ³ãŒã€€å¥½ï¼ˆã™ï¼‰ãã§ã™ï¼', trans: 'æˆ‘å–œæ­¡éŠ€å–‰é•·å°¾å±±é›€å’Œå†°å…­å°¾ï¼' },
                { role: 'me', name: 'å¼µå…ˆç”Ÿ', text: 'Akiã¡ã‚ƒã‚“ã€æœ€è¿‘ï¼ˆã•ã„ãã‚“ï¼‰ã€€ä½•ï¼ˆãªã«ï¼‰ã‚’ã€€è²·ï¼ˆã‹ï¼‰ã„ã¾ã—ãŸã‹ï¼Ÿ', trans: 'Aki é†¬ï¼Œæœ€è¿‘è²·äº†ä»€éº¼ï¼Ÿ' },
                { role: 'maid', name: 'Aki', text: '...å¾Œï¼ˆã‚ã¨ï¼‰ã§ã€€ãƒã‚§ã‚­ã®ã€€ã¬ã„ãã‚‹ã¿ã€€è¦‹ï¼ˆã¿ï¼‰ã›ã¦ã‚ã’ã‚‹ã€‚', trans: '...ç­‰ç­‰çµ¦ä½ çœ‹æ‹ç«‹å¾—ä¸Šé¢çš„å¨ƒå¨ƒã€‚' }
                ]
            },
            {
                id: 't2-05',
                theme: 'ä¸»é¡Œ 2: æ—¥å¸¸å°è©±',
                type: 'grammar',
                title: 'æ–‡æ³•ï¼ˆã¶ã‚“ã½ã†ï¼‰ï¼šåè©ä¿®é£¾',
                subtitle: 'åè© / å½¢å®¹è© + åè©',
                content: {
                explanation: 'ç”¨åè©æˆ–å½¢å®¹è©ä¾†ä¿®é£¾å¾Œé¢çš„åè©ï¼Œè®“æè¿°æ›´è±å¯Œã€‚',
                examples: [
                    { jp: 'ãƒã‚±ãƒ¢ãƒ³ ã® ã‚²ãƒ¼ãƒ ', zh: 'å¯¶å¯å¤¢çš„éŠæˆ² (åè©+ã®+åè©)' },
                    { jp: 'é’ï¼ˆã‚ãŠï¼‰ã„ ãƒã‚±ãƒ¢ãƒ³', zh: 'è—è‰²çš„å¯¶å¯å¤¢ (ã„å½¢å®¹è©ç›´æ¥+åè©)' },
                    { jp: 'ç´ æ•µï¼ˆã™ã¦ãï¼‰ãª ãƒ¡ã‚¤ãƒ‰', zh: 'å¾ˆæ£’çš„å¥³åƒ• (ãªå½¢å®¹è©+ãª+åè©)' },
                    { jp: 'æœ‰åï¼ˆã‚†ã†ã‚ã„ï¼‰ãª åº—ï¼ˆã¿ã›ï¼‰', zh: 'æœ‰åçš„åº— (ãªå½¢å®¹è©+ãª+åè©)' }
                ]
                }
            },
            {
                id: 't2-06',
                theme: 'ä¸»é¡Œ 2: æ—¥å¸¸å°è©±',
                type: 'writing',
                title: 'æ–‡ç« ç·´ç¿’ï¼ˆã¶ã‚“ã—ã‚‡ã†ã‚Œã‚“ã—ã‚…ã†ï¼‰',
                content: {
                original: [
                    'Akiã¡ã‚ƒã‚“ã¯ã€€ã‚¢ãƒ­ãƒ¼ãƒ©ãƒ­ã‚³ãƒ³ãŒã€€å¥½ï¼ˆã™ï¼‰ãã§ã™ã€‚',
                    'ç§ï¼ˆã‚ãŸã—ï¼‰ã‚‚ã€€ã‚¢ãƒ­ãƒ¼ãƒ©ãƒ­ã‚³ãƒ³ãŒã€€å¥½ï¼ˆã™ï¼‰ãã§ã™ã€‚',
                    'åŒï¼ˆãŠãªï¼‰ã˜ã§ã™ã€‚'
                ],
                practice: [
                    'Aki é†¬å–œæ­¡å†°å…­å°¾ã€‚',
                    'æˆ‘ä¹Ÿå–œæ­¡å†°å…­å°¾ã€‚',
                    'æˆ‘å€‘ä¸€æ¨£ã€‚'
                ]
                }
            },

            // ==========================================
            // ä¸»é¡Œ 3: å¯¶å¯å¤¢
            // ==========================================
            {
                id: 't3-03',
                theme: 'ä¸»é¡Œ 3: å¯¶å¯å¤¢èˆ‡å‹•ç•«',
                type: 'vocab',
                title: 'å˜èªï¼ˆãŸã‚“ã”ï¼‰ (ç‰¹å¾´ãƒ»ã‚¿ã‚¤ãƒ—)',
                content: [
                { jp: 'æ°´è‰²ï¼ˆã¿ãšã„ã‚ï¼‰', type: 'åè©', zh: 'æ°´è—è‰²' },
                { jp: 'é’ï¼ˆã‚ãŠï¼‰', type: 'åè©', zh: 'è—è‰²' },
                { jp: 'ç™½ï¼ˆã—ã‚ï¼‰', type: 'åè©', zh: 'ç™½è‰²' },
                { jp: 'æ°·ï¼ˆã“ãŠã‚Šï¼‰', type: 'åè©', zh: 'å†°' },
                { jp: 'ã‚¿ã‚¤ãƒ—', type: 'åè©', zh: 'å±¬æ€§/é¡å‹' },
                { jp: 'ä¸€ç•ªï¼ˆã„ã¡ã°ã‚“ï¼‰', type: 'å‰¯è©', zh: 'æœ€/ç¬¬ä¸€' },
                { jp: 'ä¾‹ï¼ˆãŸã¨ï¼‰ãˆã°', type: 'å‰¯è©', zh: 'ä¾‹å¦‚' },
                { jp: 'ç¶ºéº—ï¼ˆãã‚Œã„ï¼‰', type: 'å½¢å®¹å‹•è©', zh: 'æ¼‚äº®' },
                { jp: 'é€²åŒ–ï¼ˆã—ã‚“ã‹ï¼‰', type: 'å/å‹•', zh: 'é€²åŒ–' },
                { jp: 'é›†ï¼ˆã‚ã¤ï¼‰ã‚ã¾ã™', type: 'å‹•è©', zh: 'æ”¶é›†' }
                ]
            },
            {
                id: 't3-01',
                theme: 'ä¸»é¡Œ 3: å¯¶å¯å¤¢èˆ‡å‹•ç•«',
                type: 'dialogue',
                title: 'å¯¾è©±ï¼ˆãŸã„ã‚ï¼‰ï¼šãƒã‚±ãƒ¢ãƒ³ã®è©±',
                content: [
                { role: 'other', name: 'æœ‹å‹', text: 'ã©ã®ãƒã‚±ãƒ¢ãƒ³ãŒã€€å¥½ï¼ˆã™ï¼‰ãã§ã™ã‹ï¼Ÿ', trans: 'å–œæ­¡å“ªç¨®å¯¶å¯å¤¢ï¼Ÿ' },
                { role: 'me', name: 'å¼µå…ˆç”Ÿ', text: 'æ°´è‰²ï¼ˆã¿ãšã„ã‚ï¼‰ã®ãƒã‚±ãƒ¢ãƒ³ãŒã€€å¥½ï¼ˆã™ï¼‰ãã§ã™ã€‚', trans: 'å–œæ­¡æ°´è—è‰²çš„å¯¶å¯å¤¢ã€‚' },
                { role: 'other', name: 'æœ‹å‹', text: 'ä¾‹ï¼ˆãŸã¨ï¼‰ãˆã°ï¼Ÿ', trans: 'ä¾‹å¦‚ï¼Ÿ' },
                { role: 'me', name: 'å¼µå…ˆç”Ÿ', text: 'ã‚¢ãƒ­ãƒ¼ãƒ©ãƒ­ã‚³ãƒ³ã§ã™ã€‚ä¸€ç•ªï¼ˆã„ã¡ã°ã‚“ï¼‰å¥½ï¼ˆã™ï¼‰ãã§ã™ã€‚', trans: 'å†°å…­å°¾ã€‚æœ€å–œæ­¡äº†ã€‚' }
                ]
            },
            {
                id: 't3-02',
                theme: 'ä¸»é¡Œ 3: å¯¶å¯å¤¢èˆ‡å‹•ç•«',
                type: 'story',
                title: 'æœ¬æ–‡ï¼ˆã»ã‚“ã¶ã‚“ï¼‰ï¼šãªãœå¥½ï¼ˆã™ï¼‰ãï¼Ÿ',
                content: [
                { jp: 'ã‚¢ãƒ­ãƒ¼ãƒ©ãƒ­ã‚³ãƒ³ã¯ã€€ç™½ï¼ˆã—ã‚ï¼‰ãã¦ã€€ç¶ºéº—ï¼ˆãã‚Œã„ï¼‰ã§ã™ã€‚', zh: 'å†°å…­å°¾åˆç™½åˆæ¼‚äº®ã€‚' },
                { jp: 'æ°·ï¼ˆã“ãŠã‚Šï¼‰ã‚¿ã‚¤ãƒ—ã§ã™ã€‚', zh: 'æ˜¯å†°å±¬æ€§çš„ã€‚' },
                { jp: 'ã¨ã¦ã‚‚ã€€å¯æ„›ï¼ˆã‹ã‚ã„ï¼‰ã„ã§ã™ã€‚', zh: 'éå¸¸å¯æ„›ã€‚' }
                ]
            },
            {
                id: 't3-04',
                theme: 'ä¸»é¡Œ 3: å¯¶å¯å¤¢èˆ‡å‹•ç•«',
                type: 'grammar',
                title: 'ä¾‹æ–‡ï¼ˆã‚Œã„ã¶ã‚“ï¼‰ï¼šå½¢å®¹è©ï¼ˆã‘ã„ã‚ˆã†ã—ï¼‰',
                subtitle: '',
                content: {
                explanation: '',
                examples: [
                    { jp: 'ä¸€ç•ªï¼ˆã„ã¡ã°ã‚“ï¼‰ å¥½ï¼ˆã™ï¼‰ãã§ã™ã€‚', zh: 'æœ€å–œæ­¡ã€‚' },
                    { jp: 'ç™½ï¼ˆã—ã‚ï¼‰ãã¦ã€å¯æ„›ï¼ˆã‹ã‚ã„ï¼‰ã„ã§ã™ã€‚', zh: 'åˆç™½åˆå¯æ„›ã€‚' },
                    { jp: 'ç¶ºéº—ï¼ˆãã‚Œã„ï¼‰ã§ã€æœ‰åï¼ˆã‚†ã†ã‚ã„ï¼‰ã§ã™ã€‚', zh: 'åˆæ¼‚äº®åˆæœ‰åã€‚' },
                    { jp: 'ä½“ï¼ˆã‹ã‚‰ã ï¼‰ãŒã€€ç¡¬ï¼ˆã‹ãŸï¼‰ãã¦ã€ç—›ï¼ˆã„ãŸï¼‰ã„ã§ã™ã€‚', zh: 'èº«é«”åˆç¡¬åˆç—›ã€‚' },
                    { jp: 'ã‚¹ãƒˆãƒ¬ãƒƒãƒã¯ã€€æ°—æŒï¼ˆãã‚‚ï¼‰ã¡ã‚ˆãã¦ã€å¤§åˆ‡ï¼ˆãŸã„ã›ã¤ï¼‰ã§ã™ã€‚', zh: 'ä¼¸å±•åˆèˆ’æœåˆé‡è¦ã€‚' },
                    { jp: 'ãŠå®¢ï¼ˆãã‚ƒãï¼‰ã•ã‚“ã¯ã€€çœŸé¢ç›®ï¼ˆã¾ã˜ã‚ï¼‰ã§ã€å„ªï¼ˆã‚„ã•ï¼‰ã—ã„ã§ã™ã€‚', zh: 'å®¢äººåˆèªçœŸåˆæº«æŸ”ã€‚' }
                ]
                }
            },
            {
                id: 't3-04-ex',
                theme: 'ä¸»é¡Œ 3: å¯¶å¯å¤¢èˆ‡å‹•ç•«',
                type: 'grammar',
                title: 'æ–‡æ³•ï¼ˆã¶ã‚“ã½ã†ï¼‰ 2ï¼šå½¢å®¹è©ï¼ˆã‘ã„ã‚ˆã†ã—ï¼‰ã®æ¥ç¶šï¼ˆã›ã¤ããï¼‰',
                subtitle: 'ã„A -> ãã¦ + N / ãªA -> ã§ + N',
                content: {
                    explanation: 'å¼·èª¿ï¼š<br>â— ã„å½¢å®¹è© ï¼‹ ãã¦ ï¼‹ åè©<br>â— ãªå½¢å®¹è© ï¼‹ ã§ ï¼‹ åè©',
                    examples: [
                        { jp: 'ç™½ï¼ˆã—ã‚ï¼‰ãã¦ã€€å¯æ„›ï¼ˆã‹ã‚ã„ï¼‰ã„ã€€ãƒã‚±ãƒ¢ãƒ³', zh: 'åˆç™½åˆå¯æ„›çš„å¯¶å¯å¤¢ (ã„å½¢å®¹è© -> ãã¦)' },
                        { jp: 'å¼·ï¼ˆã¤ã‚ˆï¼‰ãã¦ã€€ã‹ã£ã“ã„ã„ã€€ãƒ’ãƒ¼ãƒ­ãƒ¼', zh: 'åˆå¼·åˆå¸¥æ°£çš„è‹±é›„ (ã„å½¢å®¹è© -> ãã¦)' },
                        { jp: 'ç¶ºéº—ï¼ˆãã‚Œã„ï¼‰ã§ã€€æœ‰åï¼ˆã‚†ã†ã‚ã„ï¼‰ãªã€€å ´æ‰€ï¼ˆã°ã—ã‚‡ï¼‰', zh: 'åˆæ¼‚äº®åˆæœ‰åçš„åœ°é» (ãªå½¢å®¹è© -> ã§)' }
                    ]
                }
            },
            {
                id: 't3-05',
                theme: 'ä¸»é¡Œ 3: å¯¶å¯å¤¢èˆ‡å‹•ç•«',
                type: 'game',
                title: 'æ–‡æ³•ç·´ç¿’ï¼šå½¢å®¹è©ï¼ˆã‘ã„ã‚ˆã†ã—ï¼‰ã®æ¥ç¶šï¼ˆã›ã¤ããï¼‰',
                subtitle: 'ã¤ãªã’ã¦è¨€ã„ã¾ã—ã‚‡ã† (è©¦è‘—é€£èµ·ä¾†èªªèªªçœ‹)',
                content: [
                { q: 'ãƒ”ã‚«ãƒãƒ¥ã‚¦ã¯ã€€é»„è‰²ï¼ˆãã„ã‚ï¼‰ã„ã€‚å¯æ„›ï¼ˆã‹ã‚ã„ï¼‰ã„ã€‚', a: 'ãƒ”ã‚«ãƒãƒ¥ã‚¦ã¯ã€€_________________________________' },
                { q: 'ã‚«ãƒ“ã‚´ãƒ³ã¯ã€€å¼·ï¼ˆã¤ã‚ˆï¼‰ã„ã€‚å¤§ï¼ˆãŠãŠï¼‰ãã„ã€‚', a: 'ã‚«ãƒ“ã‚´ãƒ³ã¯ã€€_________________________________' },
                { q: 'ã‚¢ãƒ­ãƒ¼ãƒ©ãƒ­ã‚³ãƒ³ã¯ã€€ç™½ï¼ˆã—ã‚ï¼‰ã„ã€‚ç¶ºéº—ï¼ˆãã‚Œã„ï¼‰ã ã€‚', a: 'ã‚¢ãƒ­ãƒ¼ãƒ©ãƒ­ã‚³ãƒ³ã¯ã€€_________________________________' },
                { q: 'ãƒŸãƒŸãƒƒã‚­ãƒ¥ã¯ã€€å¯‚ï¼ˆã•ã³ï¼‰ã—ã„ã€‚å¼·ï¼ˆã¤ã‚ˆï¼‰ã„ã€‚', a: 'ãƒŸãƒŸãƒƒã‚­ãƒ¥ã¯ã€€_________________________________' }
                ]
            },

            // ==========================================
            // ä¸»é¡Œ 4: å°ç£è§€å…‰
            // ==========================================
            {
                id: 't4-03',
                theme: 'ä¸»é¡Œ 4: ä»‹ç´¹å°ç£è§€å…‰',
                type: 'vocab',
                title: 'å˜èªï¼ˆãŸã‚“ã”ï¼‰ (è¦³å…‰)',
                content: [
                { jp: 'æ¡ˆå†…ï¼ˆã‚ã‚“ãªã„ï¼‰ã—ã¾ã™', type: 'å‹•è©', zh: 'å¸¶è·¯/å°è¦½' },
                { jp: 'è¡Œï¼ˆã„ï¼‰ããŸã„', type: 'å‹•è©', zh: 'æƒ³å»' },
                { jp: 'é£Ÿï¼ˆãŸï¼‰ã¹ãŸã„', type: 'å‹•è©', zh: 'æƒ³åƒ' },
                { jp: 'å¤œå¸‚ï¼ˆã‚ˆã„ã¡ï¼‰', type: 'åè©', zh: 'å¤œå¸‚' },
                { jp: 'å°ç± åŒ…ï¼ˆã‚·ãƒ§ãƒ¼ãƒ­ãƒ³ãƒãƒ¼ï¼‰', type: 'åè©', zh: 'å°ç± åŒ…' },
                { jp: 'ã‚¿ãƒ”ã‚ªã‚«', type: 'åè©', zh: 'çç å¥¶èŒ¶' },
                { jp: 'é›»è»Šï¼ˆã§ã‚“ã—ã‚ƒï¼‰', type: 'åè©', zh: 'é›»è»Š/æ·é‹' },
                { jp: 'è¿‘ï¼ˆã¡ã‹ï¼‰ã„', type: 'å½¢å®¹è©', zh: 'è¿‘' },
                { jp: 'é ï¼ˆã¨ãŠï¼‰ã„', type: 'å½¢å®¹è©', zh: 'é ' },
                { jp: 'ä¸€ç·’ï¼ˆã„ã£ã—ã‚‡ï¼‰ã«', type: 'å‰¯è©', zh: 'ä¸€èµ·' }
                ]
            },
            {
                id: 't4-01',
                theme: 'ä¸»é¡Œ 4: ä»‹ç´¹å°ç£è§€å…‰',
                type: 'dialogue',
                title: 'å¯¾è©±ï¼ˆãŸã„ã‚ï¼‰ï¼šå°æ¹¾ã¸è¡ŒããŸã„',
                content: [
                { role: 'idol', name: 'YOSUGALA', text: 'ä»Šåº¦ï¼ˆã“ã‚“ã©ï¼‰ã€å°åŒ—ï¼ˆã‚¿ã‚¤ãƒšã‚¤ï¼‰ã«ã€€è¡Œï¼ˆã„ï¼‰ãã¾ã™ï¼', trans: 'ä¸‹æ¬¡è¦å»å°åŒ—ï¼' },
                { role: 'me', name: 'å¼µå…ˆç”Ÿ', text: 'æ¡ˆå†…ï¼ˆã‚ã‚“ãªã„ï¼‰ã—ã¾ã™ã‚ˆã€‚ã©ã“ã¸ã€€è¡Œï¼ˆã„ï¼‰ããŸã„ã§ã™ã‹ï¼Ÿ', trans: 'æˆ‘å¸¶è·¯å–”ã€‚æƒ³å»å“ªè£¡ï¼Ÿ' },
                { role: 'idol', name: 'YOSUGALA', text: 'ç¾å‘³ï¼ˆãŠã„ï¼‰ã—ã„åº—ï¼ˆã¿ã›ï¼‰ã¯ã€€ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', trans: 'æœ‰å¥½åƒçš„åº—å—ï¼Ÿ' },
                { role: 'me', name: 'å¼µå…ˆç”Ÿ', text: 'ãŸãã•ã‚“ã€€ã‚ã‚Šã¾ã™ã‚ˆã€‚å¤œå¸‚ï¼ˆã‚ˆã„ã¡ï¼‰ã¸ã€€è¡Œï¼ˆã„ï¼‰ãã¾ã—ã‚‡ã†ï¼', trans: 'æœ‰å¾ˆå¤šå–”ã€‚å»å¤œå¸‚å§ï¼' },
                { role: 'idol', name: 'YOSUGALA', text: 'ã‚ã‚ã€æ¥½ï¼ˆãŸã®ï¼‰ã—ã¿ï¼çµ¶å¯¾ï¼ˆãœã£ãŸã„ï¼‰ã€€è¡Œï¼ˆã„ï¼‰ãã¾ã™ï¼', trans: 'å“‡ï¼Œå¥½æœŸå¾…ï¼çµ•å°è¦å»ï¼' }
                ]
            },
            {
                id: 't4-02',
                theme: 'ä¸»é¡Œ 4: ä»‹ç´¹å°ç£è§€å…‰',
                type: 'story',
                title: 'æœ¬æ–‡ï¼ˆã»ã‚“ã¶ã‚“ï¼‰ï¼šãŠã™ã™ã‚',
                content: [
                { jp: 'å¤œå¸‚ï¼ˆã‚ˆã„ã¡ï¼‰ãŒã€€ã‚ã‚Šã¾ã™ã€‚', zh: 'æœ‰å¤œå¸‚ã€‚' },
                { jp: 'ã‚¿ãƒ”ã‚ªã‚«ãŒã€€ç¾å‘³ï¼ˆãŠã„ï¼‰ã—ã„ã§ã™ã€‚', zh: 'çç å¥¶èŒ¶å¾ˆå¥½åƒã€‚' },
                { jp: 'ä¸€ç·’ï¼ˆã„ã£ã—ã‚‡ï¼‰ã«ã€€è¡Œï¼ˆã„ï¼‰ãã¾ã—ã‚‡ã†ã€‚', zh: 'ä¸€èµ·å»å§ã€‚' }
                ]
            },
            {
                id: 't4-04',
                theme: 'ä¸»é¡Œ 4: ä»‹ç´¹å°ç£è§€å…‰',
                type: 'grammar',
                title: 'æ–‡æ³•ï¼ˆã¶ã‚“ã½ã†ï¼‰ï¼šå­˜åœ¨ï¼ˆãã‚“ã–ã„ï¼‰',
                subtitle: 'å ´æ‰€ ã« ç‰© ãŒ ã‚ã‚Šã¾ã™',
                content: {
                explanation: 'è¡¨é”å“ªè£¡æœ‰ä»€éº¼æ±è¥¿ã€‚(ä¸€æ™©ä¸­ï¼ˆã²ã¨ã°ã‚“ã˜ã‚…ã†ï¼‰ã€€ã“ã®æ–‡æ³•ï¼ˆã¶ã‚“ã½ã†ï¼‰ã‚’ã€€ç·´ç¿’ï¼ˆã‚Œã‚“ã—ã‚…ã†ï¼‰ã—ã¾ã—ãŸï¼)',
                examples: [
                    { jp: 'å°åŒ—ï¼ˆã‚¿ã‚¤ãƒšã‚¤ï¼‰ ã« ãƒã‚±ã‚»ãƒ³ ãŒ ã‚ã‚Šã¾ã™ã€‚', zh: 'å°åŒ—æœ‰å¯¶å¯å¤¢ä¸­å¿ƒã€‚' },
                    { jp: 'ã‚ãã“ ã« ç¾å‘³ï¼ˆãŠã„ï¼‰ã—ã„ åº—ï¼ˆã¿ã›ï¼‰ ãŒ ã‚ã‚Šã¾ã™ã€‚', zh: 'é‚£è£¡æœ‰å¥½åƒçš„åº—ã€‚' },
                    { jp: 'å¤œå¸‚ï¼ˆã‚ˆã„ã¡ï¼‰ ã« ãƒˆã‚¤ãƒ¬ ãŒ ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', zh: 'å¤œå¸‚æœ‰å»æ‰€å—ï¼Ÿ' }
                ]
                }
            },
            {
                id: 't4-05',
                theme: 'ä¸»é¡Œ 4: ä»‹ç´¹å°ç£è§€å…‰',
                type: 'writing',
                title: 'æ–‡ç« ç·´ç¿’ï¼ˆã¶ã‚“ã—ã‚‡ã†ã‚Œã‚“ã—ã‚…ã†ï¼‰',
                content: {
                original: [
                    'å°åŒ—ï¼ˆã‚¿ã‚¤ãƒšã‚¤ï¼‰ã«ã€€ãƒã‚±ãƒ¢ãƒ³ã‚»ãƒ³ã‚¿ãƒ¼ãŒã€€ã‚ã‚Šã¾ã™ã€‚',
                    'ç§ï¼ˆã‚ãŸã—ï¼‰ã¯ã€€è¡Œï¼ˆã„ï¼‰ããŸã„ã§ã™ã€‚',
                    'ä¸€ç·’ï¼ˆã„ã£ã—ã‚‡ï¼‰ã«ã€€è¡Œï¼ˆã„ï¼‰ãã¾ã—ã‚‡ã†ã€‚'
                ],
                practice: [
                    'å°åŒ—æœ‰å¯¶å¯å¤¢ä¸­å¿ƒã€‚',
                    'æˆ‘æƒ³å»ã€‚',
                    'ä¸€èµ·å»å§ã€‚'
                ]
                }
            },
            {
                id: 'end',
                theme: 'èª²ç¨‹çµæŸ',
                type: 'summary',
                title: 'æ–‡æ³•ï¼ˆã¶ã‚“ã½ã†ï¼‰ã¾ã¨ã‚',
                content: [
                'A ã¯ B ã§ã™ã€‚ (Aæ˜¯B)',
                'A ãŒ å¥½ï¼ˆã™ï¼‰ãã§ã™ã€‚ (å–œæ­¡A)',
                'ä¿®é£¾ï¼ˆã—ã‚…ã†ã—ã‚‡ãï¼‰ï¼šã„A + N / ãªA + ãª + N / N + ã® + N',
                'æ¥ç¶šï¼ˆã›ã¤ããï¼‰ï¼šã„A â†’ ãã¦ / ãªA â†’ ã§',
                'å ´æ‰€ï¼ˆã°ã—ã‚‡ï¼‰ ã« ç‰©ï¼ˆã‚‚ã®ï¼‰ ãŒ ã‚ã‚Šã¾ã™ã€‚ (åœ¨...æœ‰...)'
                ]
            }
        ];

        // --- æ ¸å¿ƒè®Šæ•¸ ---
        let currentSlideIndex = 0;
        let isListMode = false;

        // --- æ ¸å¿ƒåŠŸèƒ½å‡½æ•¸ ---

        // è§£ææ¼¢å­—æ¨™éŸ³ (Ruby Text)
        function parseRuby(text, className = "") {
            if (!text) return '';
            const regex = /([\u4e00-\u9faf\u3005-\u3007\u3040-\u309f\u30a0-\u30ff]+?)ï¼ˆ([\u3040-\u309f\u30a0-\u30ff]+?)ï¼‰/g;
            let result = '';
            let lastIndex = 0;
            let match;

            while ((match = regex.exec(text)) !== null) {
                result += `<span class="${className}">${text.substring(lastIndex, match.index)}</span>`;
                result += `
                    <ruby class="mx-0.5 ${className}">
                        ${match[1]}
                        <rt class="font-normal select-none">${match[2]}</rt>
                    </ruby>
                `;
                lastIndex = regex.lastIndex;
            }
            result += `<span class="${className}">${text.substring(lastIndex)}</span>`;
            return `<span class="inline-flex flex-wrap items-baseline ${className}">${result}</span>`;
        }

        // ç”Ÿæˆå–®é å…§å®¹ HTML
        function generateSlideHtml(slide) {
            let html = '';
            const titleClass = "text-4xl font-bold text-sky-800 tracking-wide mb-4 drop-shadow-sm";
            const subTitleClass = "text-xl text-sky-500 font-bold mb-6";

            switch (slide.type) {
                case 'intro': 
                    html = `
                        <div class="flex flex-col items-center h-full pt-2 text-center space-y-4">
                            <div class="w-24 h-24 bg-sky-100 rounded-full flex items-center justify-center mb-2 border-4 border-white shadow-md">
                                <i data-lucide="user" class="w-14 h-14 text-sky-500"></i>
                            </div>
                            <h1 class="${titleClass}">
                                ${parseRuby(slide.title)}
                            </h1>
                            <h2 class="${subTitleClass}">
                                ${parseRuby(slide.subtitle)}
                            </h2>
                            <div class="bg-white/80 backdrop-blur-sm p-6 rounded-3xl w-full max-w-2xl text-left space-y-6 shadow-sm border-2 border-sky-100 relative overflow-hidden">
                                <div class="absolute -right-4 -top-4 text-6xl opacity-10 rotate-12">ğŸ“</div>
                                <div class="flex items-center gap-4 relative z-10">
                                    <span class="w-24 font-bold text-sky-400 text-lg">åå‰ï¼š</span>
                                    <span class="text-2xl font-bold text-stone-700">${parseRuby(slide.content.name)}</span>
                                </div>
                                <div class="flex items-center gap-4 relative z-10">
                                    <span class="w-24 font-bold text-sky-400 text-lg">ä»•äº‹ï¼š</span>
                                    <span class="text-xl text-stone-700">${slide.content.job}</span>
                                </div>
                                <div class="border-t-2 border-dashed border-sky-100 my-1"></div>
                                <div class="relative z-10">
                                    <span class="block font-bold text-sky-400 mb-2 text-lg">æ¨ï¼ˆãŠï¼‰ã—ï¼š</span>
                                    <ul class="space-y-2 text-xl text-stone-700">
                                        ${slide.content.likes.map(like => `<li class="flex items-center"><span class="mr-2 text-sky-300">â™¥</span>${parseRuby(like)}</li>`).join('')}
                                    </ul>
                                </div>
                                <div class="border-t-2 border-dashed border-sky-100 my-1"></div>
                                <div class="bg-sky-50 p-4 rounded-2xl text-center border border-sky-100 relative z-10">
                                    <span class="text-sky-500 font-bold block mb-1 text-base">ç›®æ¨™ï¼ˆã‚‚ãã²ã‚‡ã†ï¼‰</span>
                                    <span class="text-2xl font-bold text-sky-700">${parseRuby(slide.content.goal)}</span>
                                </div>
                            </div>
                        </div>
                    `;
                    break;

                case 'title':
                    html = `
                        <div class="flex flex-col items-center justify-center h-full text-center space-y-8">
                            <h1 class="text-5xl font-bold text-sky-800 tracking-wide leading-tight px-4 drop-shadow-sm">
                                ${parseRuby(slide.title)}
                            </h1>
                            ${slide.subtitle ? `
                            <h2 class="text-3xl text-sky-500 font-bold">
                                ${parseRuby(slide.subtitle)}
                            </h2>` : ''}
                            ${slide.note ? `
                            <div class="mt-12 p-8 bg-amber-50 rounded-3xl border-4 border-amber-100 max-w-2xl text-amber-800 text-xl text-left shadow-sm relative leading-relaxed">
                                <div class="absolute -top-5 left-8 bg-white px-3 py-1 rounded-full border-2 border-amber-100 text-2xl">ğŸ’¡</div>
                                ${slide.note}
                            </div>` : ''}
                        </div>
                    `;
                    break;

                case 'story':
                    html = `
                        <div class="flex flex-col h-full pt-2 px-4">
                            <h2 class="${titleClass} text-center border-b-4 border-dotted border-sky-200 pb-3 inline-block mx-auto mb-6">
                                ${parseRuby(slide.title)}
                            </h2>
                            <div class="space-y-4 flex-1">
                                ${slide.content.map((item, idx) => `
                                    <div class="bg-white/90 p-5 rounded-2xl shadow-sm border-2 border-sky-50 flex flex-col hover:border-sky-200 transition-colors relative group">
                                        <div class="absolute -left-3 -top-3 w-8 h-8 rounded-full bg-sky-200 text-white flex items-center justify-center font-bold shadow-sm border-2 border-white text-lg">${idx + 1}</div>
                                        <div class="pl-4">
                                            <span class="text-2xl text-sky-900 mb-2 font-bold leading-relaxed block">
                                                ${parseRuby(item.jp)}
                                            </span>
                                            <span class="text-xl text-stone-500 font-medium">${item.zh}</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                    break;

                case 'dialogue':
                    html = `
                        <div class="flex flex-col h-full px-2">
                            <h2 class="${titleClass} text-center flex items-center justify-center gap-3 pb-2 mb-4">
                                <i data-lucide="message-circle" class="w-8 h-8 text-sky-400"></i>
                                ${parseRuby(slide.title)}
                            </h2>
                            <div class="flex-1 space-y-6 overflow-visible px-2 pt-2">
                                ${slide.content.map(msg => {
                                    const isMe = msg.role === 'me';
                                    return `
                                        <div class="flex ${isMe ? 'justify-end' : 'justify-start'} group">
                                            <div class="flex flex-col max-w-[90%] ${isMe ? 'items-end' : 'items-start'}">
                                                <span class="text-xs text-stone-400 mb-1 ml-1 font-bold">${msg.name}</span>
                                                <div class="p-5 rounded-3xl text-xl md:text-2xl leading-relaxed shadow-sm border-2 ${isMe ? 'bg-sky-400 text-white rounded-tr-none border-sky-400' : 'bg-white text-stone-700 rounded-tl-none border-stone-100'} relative">
                                                    ${parseRuby(msg.text)}
                                                </div>
                                                <span class="text-base text-stone-400 mt-1 px-2 font-medium">${msg.trans}</span>
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                    `;
                    break;

                case 'vocab':
                    html = `
                        <div class="flex flex-col h-full">
                            <h2 class="${titleClass} text-center border-b-4 border-dotted border-sky-200 pb-3 mb-4">
                                ${parseRuby(slide.title)}
                            </h2>
                            <div class="flex-1 grid grid-cols-1 md:grid-cols-2 gap-4">
                                ${slide.content.map((item, idx) => `
                                    <div class="flex items-center p-3 bg-white/80 rounded-2xl border border-sky-50 hover:bg-sky-50 transition-colors">
                                        <div class="w-8 h-8 rounded-full bg-sky-100 text-sky-600 flex items-center justify-center font-bold mr-4 shrink-0 text-base border border-sky-200">
                                            ${idx + 1}
                                        </div>
                                        <div class="flex-1">
                                            <div class="text-2xl font-bold text-sky-900 mb-1 leading-relaxed">
                                                ${parseRuby(item.jp)}
                                            </div>
                                            <div class="flex items-center text-stone-500 text-lg font-medium">
                                                <span class="bg-amber-100 text-amber-700 px-2 py-0.5 rounded-lg text-xs mr-2 font-bold">${item.type}</span>
                                                ${item.zh}
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                    break;
                
                case 'grammar':
                    html = `
                        <div class="flex flex-col h-full pt-2 px-4 space-y-4"> <!-- Reduced spacing from 6 to 4 -->
                            <div class="text-center space-y-4">
                                <h2 class="${titleClass}">${parseRuby(slide.title)}</h2>
                                ${slide.subtitle ? `<div class="text-2xl font-bold text-sky-600 bg-white inline-block px-8 py-4 rounded-2xl border-2 border-sky-100 shadow-sm transform -rotate-1">${parseRuby(slide.subtitle)}</div>` : ''}
                                ${slide.content.explanation ? `<div class="text-xl text-stone-600 bg-amber-50 p-6 rounded-2xl border-2 border-amber-100 text-left relative leading-relaxed"><span class="absolute -top-3 left-6 bg-amber-100 text-amber-800 px-2 py-0.5 rounded font-bold text-sm">ãƒã‚¤ãƒ³ãƒˆ</span>${slide.content.explanation}</div>` : ''}
                            </div>
                            
                            <div class="space-y-3 bg-white/50 p-4 rounded-3xl border border-white flex-1 overflow-visible"> <!-- Reduced spacing/padding, allow flex-1 to take space -->
                                ${slide.content.examples.length > 0 && !slide.subtitle.includes('ã„A') ? `<h3 class="text-lg font-bold text-sky-300 uppercase tracking-wider text-center border-b-2 border-sky-100 pb-2 mb-2">ä¾‹ï¼ˆã‚Œã„ï¼‰</h3>` : ''}
                                ${slide.content.examples.map(ex => `
                                    <div class="bg-white p-3 rounded-2xl border border-sky-50 shadow-sm flex items-start gap-3"> <!-- Reduced padding to p-3 -->
                                        <span class="text-sky-300 text-xl mt-1">â—</span>
                                        <div>
                                            <div class="text-2xl text-sky-900 font-bold mb-1 leading-relaxed">${parseRuby(ex.jp)}</div>
                                            <div class="text-lg text-stone-400 font-medium">${ex.zh}</div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                    break;

                case 'game':
                    html = `
                        <div class="flex flex-col h-full pt-4 px-4">
                            <div class="text-center mb-6">
                                <span class="inline-block p-3 rounded-full bg-amber-100 text-amber-500 mb-2 border-4 border-white shadow-sm">
                                    <i data-lucide="gamepad-2" class="w-10 h-10"></i>
                                </span>
                                <h2 class="${titleClass}">${parseRuby(slide.title)}</h2>
                                <p class="text-lg text-stone-500 font-bold bg-white/60 inline-block px-6 py-1 rounded-full">${slide.subtitle}</p>
                            </div>
                            <div class="space-y-4 flex-1">
                                ${slide.content.map(item => `
                                    <div class="bg-white p-6 rounded-3xl shadow-sm border-b-4 border-sky-100 relative overflow-hidden group hover:-translate-y-1 transition-transform duration-300">
                                        <div class="text-xl font-bold text-sky-800 mb-3 flex gap-3 items-center">
                                            <span class="bg-sky-400 text-white w-8 h-8 rounded-lg flex items-center justify-center shadow-sm text-lg">å•</span>
                                            ${parseRuby(item.q)}
                                        </div>
                                        <div class="text-lg text-stone-600 pl-4 border-l-4 border-amber-300 mt-2 bg-amber-50/50 p-2 rounded-r-lg">
                                            <span class="text-xs text-amber-400 block mb-1 font-bold uppercase tracking-wider">ç­”ï¼ˆã“ãŸï¼‰ãˆ</span>
                                            ${parseRuby(item.a)}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                    break;

                case 'writing':
                    html = `
                        <div class="flex flex-col h-full pt-4 px-2">
                            <h2 class="${titleClass} text-center mb-6">
                                ${parseRuby(slide.title)}
                            </h2>
                            <div class="flex flex-col gap-6 h-full">
                                <div class="bg-white p-6 rounded-3xl border-2 border-sky-100 shadow-sm relative">
                                    <div class="absolute -top-3 left-6 bg-sky-100 text-sky-600 px-3 py-1 rounded-full text-sm font-bold flex items-center gap-2">
                                        <i data-lucide="book-open" class="w-4 h-4"></i> ãŠæ‰‹æœ¬ï¼ˆã¦ã»ã‚“ï¼‰
                                    </div>
                                    <div class="space-y-3 text-2xl text-stone-600 leading-relaxed mt-2">
                                        ${slide.content.original.map(line => `<p class="border-b border-sky-50 pb-1">${parseRuby(line)}</p>`).join('')}
                                    </div>
                                </div>
                                <div class="bg-stone-50 border-4 border-dashed border-sky-200 p-6 rounded-3xl flex-1 relative">
                                    <div class="absolute -top-4 right-6 bg-amber-100 text-amber-600 px-3 py-1 rounded-full text-sm font-bold flex items-center gap-2 transform rotate-2">
                                        <i data-lucide="pen-tool" class="w-4 h-4"></i> ç·´ç¿’ï¼ˆã‚Œã‚“ã—ã‚…ã†ï¼‰
                                    </div>
                                    <div class="space-y-3 text-2xl text-stone-700 leading-relaxed mt-2">
                                        ${slide.content.practice.map(line => `<p class="border-b border-stone-200 pb-1 h-12 flex items-end">${parseRuby(line)}</p>`).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;

                case 'summary':
                    html = `
                         <div class="flex flex-col items-center justify-center h-full text-center px-4 space-y-8">
                            <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center text-green-500 mb-4 border-4 border-white shadow-md animate-bounce">
                                <i data-lucide="check" class="w-10 h-10"></i>
                            </div>
                            <h2 class="${titleClass}">${parseRuby(slide.title)}</h2>
                            <div class="bg-white/90 border-2 border-green-100 p-8 rounded-3xl w-full shadow-sm relative">
                                <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-green-50 text-green-600 px-4 py-1 rounded-full text-sm font-bold border border-green-100">ã¾ã¨ã‚</div>
                                <ul class="text-left space-y-4">
                                    ${slide.content.map(item => `
                                        <li class="flex items-start text-xl text-stone-600">
                                            <span class="text-green-400 mr-4 font-bold mt-1 text-2xl">âœ“</span>
                                            <div class="flex-1 border-b-2 border-dotted border-stone-100 pb-2">
                                                ${parseRuby(item)}
                                            </div>
                                        </li>
                                    `).join('')}
                                </ul>
                            </div>
                        </div>
                    `;
                    break;
            }
            return html;
        }

        function toggleViewMode() {
            isListMode = !isListMode;
            renderView();
        }

        function renderView() {
            const contentDiv = document.getElementById('content');
            const appDiv = document.getElementById('app');
            const headerDiv = document.getElementById('header');
            const navBar = document.getElementById('nav-bar');
            const decorations = document.getElementById('decorations');
            const viewModeText = document.getElementById('view-mode-text');
            const headerTitle = document.getElementById('header-title');

            if (isListMode) {
                appDiv.classList.add('list-mode');
                let fullHtml = '';
                slides.forEach((slide, index) => {
                    fullHtml += `
                        <div class="list-mode-slide">
                            <div class="absolute top-4 right-4 text-sky-300 font-bold text-lg z-20 opacity-50">Page ${index + 1}</div>
                            <div class="flex-1 p-8 md:p-12 relative flex flex-col z-10">
                                ${generateSlideHtml(slide)}
                            </div>
                        </div>
                    `;
                });
                contentDiv.innerHTML = fullHtml;
                viewModeText.textContent = "æˆ»ã‚‹ (è¿”å›å–®é )";
                navBar.style.display = 'none';
                decorations.style.display = 'none';
                contentDiv.classList.remove('overflow-y-auto');
                contentDiv.classList.add('overflow-visible');
                headerTitle.innerHTML = `<span class="text-sky-700">ğŸ–¨ï¸ å…¨ã‚¹ãƒ©ã‚¤ãƒ‰ (All Slides)</span>`;
            } else {
                appDiv.classList.remove('list-mode');
                contentDiv.classList.add('overflow-y-auto');
                contentDiv.classList.remove('overflow-visible');
                navBar.style.display = 'flex';
                decorations.style.display = 'block';
                viewModeText.textContent = "å…¨éƒ¨é¡¯ç¤º (åˆ—è¡¨/åˆ—å°ç”¨)";
                renderSlide();
            }
            lucide.createIcons();
        }

        function renderSlide() {
            const slide = slides[currentSlideIndex];
            const contentDiv = document.getElementById('content');
            const headerTitle = document.getElementById('header-title');
            const pageIndicator = document.getElementById('page-indicator');
            
            let iconName = 'book-open';
            if (slide.theme.includes('å¶åƒ')) iconName = 'heart';
            if (slide.theme.includes('æ—¥å¸¸')) iconName = 'coffee';
            if (slide.theme.includes('å¯¶å¯å¤¢')) iconName = 'star';
            if (slide.theme.includes('è§€å…‰')) iconName = 'map-pin';
            if (slide.type === 'intro') iconName = 'smile';

            headerTitle.innerHTML = `<i data-lucide="${iconName}" class="w-8 h-8 text-sky-600"></i> ${slide.theme}`;
            pageIndicator.innerText = `${currentSlideIndex + 1} / ${slides.length}`;
            contentDiv.innerHTML = generateSlideHtml(slide);
            updateNavState();
        }

        function updateNavState() {
            const btnPrev = document.getElementById('btn-prev');
            const btnNext = document.getElementById('btn-next');
            if (currentSlideIndex === 0) {
                btnPrev.disabled = true;
                btnPrev.classList.add('opacity-50', 'cursor-not-allowed', 'grayscale');
            } else {
                btnPrev.disabled = false;
                btnPrev.classList.remove('opacity-50', 'cursor-not-allowed', 'grayscale');
            }
            if (currentSlideIndex === slides.length - 1) {
                btnNext.disabled = true;
                btnNext.classList.add('opacity-50', 'cursor-not-allowed', 'grayscale');
            } else {
                btnNext.disabled = false;
                btnNext.classList.remove('opacity-50', 'cursor-not-allowed', 'grayscale');
            }
        }

        function nextSlide() {
            if (currentSlideIndex < slides.length - 1) {
                currentSlideIndex++;
                renderView();
                document.getElementById('content').scrollTop = 0;
            }
        }

        function prevSlide() {
            if (currentSlideIndex > 0) {
                currentSlideIndex--;
                renderView();
                document.getElementById('content').scrollTop = 0;
            }
        }

        document.addEventListener('keydown', (e) => {
            if (isListMode) return;
            if (e.key === 'ArrowRight' || e.key === ' ' || e.key === 'Enter') {
                nextSlide();
            } else if (e.key === 'ArrowLeft') {
                prevSlide();
            }
        });

        window.onload = () => { renderView(); };
    </script>
</body>
</html>